<div class="min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full space-y-8">
    <div class="bg-white shadow-lg rounded-lg p-8">
      <!-- Header -->
      <div class="text-center mb-8">
        <mat-icon class="text-6xl text-green-600 mb-4">lock_reset</mat-icon>
        <h2 class="text-2xl font-bold text-gray-900 mb-2">
          Cambiar Contraseña
        </h2>
        <p class="text-sm text-gray-600">
          Actualiza tu contraseña de forma segura
        </p>
      </div>

      <!-- Form -->
      <form class="space-y-6" (ngSubmit)="changePassword()">
        <!-- Contraseña Actual -->
        <div class="relative">
          <input
            id="currentPassword"
            name="currentPassword"
            [type]="showCurrentPassword ? 'text' : 'password'"
            [(ngModel)]="currentPassword"
            placeholder="Ingresa tu contraseña actual"
            required
            class="w-full px-12 py-4 bg-white border border-gray-200 rounded-xl text-gray-700 text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300 shadow-sm hover:shadow-md"
          />
          <mat-icon class="absolute left-4 top-1/2 transform -translate-y-1/2 text-green-500">
            lock
          </mat-icon>
          <mat-icon
            (click)="toggleCurrentPasswordVisibility()"
            class="absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500 hover:text-green-500 transition-colors"
          >
            {{ showCurrentPassword ? "visibility" : "visibility_off" }}
          </mat-icon>
          <label class="absolute -top-2 left-3 bg-white px-2 text-sm text-gray-600">
            Contraseña Actual
          </label>
        </div>

        <!-- Nueva Contraseña -->
        <div class="relative">
          <input
            id="newPassword"
            name="newPassword"
            [type]="showNewPassword ? 'text' : 'password'"
            [(ngModel)]="newPassword"
            placeholder="Ingresa tu nueva contraseña"
            required
            class="w-full px-12 py-4 bg-white border border-gray-200 rounded-xl text-gray-700 text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300 shadow-sm hover:shadow-md"
          />
          <mat-icon class="absolute left-4 top-1/2 transform -translate-y-1/2 text-green-500">
            lock
          </mat-icon>
          <mat-icon
            (click)="toggleNewPasswordVisibility()"
            class="absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500 hover:text-green-500 transition-colors"
          >
            {{ showNewPassword ? "visibility" : "visibility_off" }}
          </mat-icon>
          <label class="absolute -top-2 left-3 bg-white px-2 text-sm text-gray-600">
            Nueva Contraseña
          </label>
        </div>

        <!-- Validaciones de la nueva contraseña -->
        <div *ngIf="newPassword" class="space-y-2">
          <h4 class="text-sm font-medium text-gray-700 flex items-center">
            <mat-icon class="text-sm mr-1">security</mat-icon>
            Requisitos de la contraseña:
          </h4>
          
          <!-- Lista de requisitos -->
          <div class="space-y-1">
            <div class="flex items-center text-xs">
              <mat-icon [ngClass]="hasMinLength() ? 'text-green-500' : 'text-red-500'" class="text-sm mr-2">
                {{ hasMinLength() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span [ngClass]="hasMinLength() ? 'text-green-600' : 'text-red-600'">
                Mínimo 6 caracteres
              </span>
            </div>
            
            <div class="flex items-center text-xs">
              <mat-icon [ngClass]="hasLowerCase() ? 'text-green-500' : 'text-red-500'" class="text-sm mr-2">
                {{ hasLowerCase() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span [ngClass]="hasLowerCase() ? 'text-green-600' : 'text-red-600'">
                Al menos una letra minúscula
              </span>
            </div>
            
            <div class="flex items-center text-xs">
              <mat-icon [ngClass]="hasUpperCase() ? 'text-green-500' : 'text-red-500'" class="text-sm mr-2">
                {{ hasUpperCase() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span [ngClass]="hasUpperCase() ? 'text-green-600' : 'text-red-600'">
                Al menos una letra mayúscula
              </span>
            </div>
            
            <div class="flex items-center text-xs">
              <mat-icon [ngClass]="hasNumber() ? 'text-green-500' : 'text-red-500'" class="text-sm mr-2">
                {{ hasNumber() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span [ngClass]="hasNumber() ? 'text-green-600' : 'text-red-600'">
                Al menos un número
              </span>
            </div>
            
            <div class="flex items-center text-xs">
              <mat-icon [ngClass]="hasSpecialCharacter() ? 'text-green-500' : 'text-red-500'" class="text-sm mr-2">
                {{ hasSpecialCharacter() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span [ngClass]="hasSpecialCharacter() ? 'text-green-600' : 'text-red-600'">
                Al menos un carácter especial (!#$%^&*)
              </span>
            </div>

            <!-- Validación de contraseñas diferentes -->
            <div class="flex items-center text-xs" *ngIf="currentPassword && newPassword">
              <mat-icon [ngClass]="arePasswordsDifferent() ? 'text-green-500' : 'text-red-500'" class="text-sm mr-2">
                {{ arePasswordsDifferent() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span [ngClass]="arePasswordsDifferent() ? 'text-green-600' : 'text-red-600'">
                Diferente a la contraseña actual
              </span>
            </div>
          </div>
        </div>

        <!-- Mensajes de validación cuando hay errores -->
        <div *ngIf="newPassword && getPasswordValidationMessages().length > 0" class="bg-red-50 border border-red-200 rounded-lg p-3">
          <div class="flex items-center mb-2">
            <mat-icon class="text-red-500 mr-2 text-sm">error</mat-icon>
            <span class="text-red-700 text-sm font-medium">La contraseña debe cumplir con:</span>
          </div>
          <ul class="text-red-600 text-xs space-y-1 ml-6">
            <li *ngFor="let message of getPasswordValidationMessages()">• {{ message }}</li>
          </ul>
        </div>

        <!-- Mensaje de éxito cuando la contraseña es válida -->
        <div *ngIf="newPassword && isNewPasswordValid() && arePasswordsDifferent()" class="bg-green-50 border border-green-200 rounded-lg p-3">
          <div class="flex items-center">
            <mat-icon class="text-green-500 mr-2 text-sm">check_circle</mat-icon>
            <span class="text-green-700 text-sm font-medium">La contraseña cumple con todos los requisitos</span>
          </div>
        </div>

        <!-- Botón -->
        <div class="pt-4">
          <button
            type="submit"
            [disabled]="!canSubmit()"
            class="w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-xl shadow-sm text-base font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 transition-colors duration-200"
          >
            <mat-icon class="mr-2">security</mat-icon>
            Cambiar Contraseña
          </button>
        </div>
      </form>
    </div>
  </div>
</div>